<div class="space-y-6 p-2 md:p-6">

    <!-- Header + Search -->
    <div class="flex flex-col md:flex-row justify-between items-center bg-[#f8f2eb] p-4 rounded-lg shadow space-y-4 md:space-y-0 md:space-x-6">
        <h2 class="text-xl md:text-2xl font-bold text-[#c69858]">Appointments</h2>
        <div class="relative w-full md:w-64">
            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-[#c69858]/70">
                <i class="fas fa-search"></i>
            </span>
            <input type="text" id="searchInput" placeholder="Search customer..."
                   class="border border-[#c69858] rounded-lg px-10 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#c69858]" />
        </div>
    </div>

    <!-- Appointments Table Container -->
    <div class="bg-white p-6 rounded-lg shadow overflow-x-auto">
        <h3 class="text-lg md:text-xl font-bold mb-4 text-[#c69858]">Recent Appointments</h3>
        <table class="table-auto w-full min-w-[600px]">
            <thead>
                <tr class="bg-[#f3e6d6] text-left text-[#5a4630]">
                    <th class="px-4 py-2">Customer</th>
                    <th class="px-4 py-2">Service</th>
                    <th class="px-4 py-2">Date</th>
                    <th class="px-4 py-2">Time</th>
                </tr>
            </thead>
            <tbody>
                <% if (bookings.length === 0) { %>
                    <tr>
                        <td colspan="4" class="px-4 py-2 text-center text-gray-500">No appointments found.</td>
                    </tr>
                <% } else { %>
                    <% bookings.forEach(booking => { %>
                        <tr class="border-b last:border-b-0 text-[#5a4630]">
                            <td class="px-4 py-2 font-bold"><%= booking.customer ? booking.customer.name : 'N/A' %></td>
                            <td class="px-4 py-2"><%= booking.serviceId ? booking.serviceId.name : 'N/A' %></td>
                            <td class="px-4 py-2"><%= booking.date.toLocaleDateString('en-GB') %></td>
                            <td class="px-4 py-2"><%= booking.time %></td>
                        </tr>
                    <% }) %>
                <% } %>
            </tbody>
        </table>
    </div>

</div>

<script>
    const searchInput = document.getElementById('searchInput');
    const table = document.querySelector('#bookingTable tbody');
    const rows = table.querySelectorAll('tr');

    searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase();
        rows.forEach(row => {
            const nameCell = row.querySelector('td:first-child');
            if (!nameCell) return;
            const name = nameCell.textContent.toLowerCase();
            row.style.display = name.includes(query) ? '' : 'none';
        });
    });
</script>
