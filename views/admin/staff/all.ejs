<div class="space-y-6 p-2 md:p-6 rounded-lg">

    <!-- Header -->
    <div class="flex flex-col md:flex-row justify-between items-center p-6 rounded-lg shadow space-y-2 md:space-y-0 bg-[#f8f2eb]">
        <h2 class="text-xl md:text-2xl font-bold text-[#c69858]">Staff</h2>

        <!-- Total Staff -->
        <div class="flex items-center gap-2 text-[#5a4630]">
            <h3 class="text-sm md:text-base">Total Staff:</h3>
            <p class="text-2xl md:text-3xl font-bold"><%= totalStaff %></p>
        </div>

        <!-- Add Staff Button -->
        <a href="/admin/staff/add" class="bg-[#bf9456] text-white px-4 py-2 rounded-lg flex items-center mt-2 md:mt-0">
            <i class="fas fa-user-plus mr-2"></i> Add Staff
        </a>
    </div>

    <!-- Staff Table (Desktop) -->
    <div class="bg-white p-6 rounded-lg shadow overflow-x-auto hidden md:block">
        <h3 class="text-lg md:text-xl font-bold mb-4 text-[#c69858]">Staff List</h3>
        <table class="table-auto w-full min-w-[600px]">
            <thead>
                <tr class="bg-[#f3e6d6] text-left text-[#5a4630]">
                    <th class="px-4 py-2">Name</th>
                    <th class="px-4 py-2">Role</th>
                    <th class="px-4 py-2">Image</th>
                    <th class="px-4 py-2">Actions</th>
                </tr>
            </thead>
            <tbody>
                <% staffList.forEach(staff => { %>
                <tr class="border-b last:border-b-0 text-[#5a4630]">
                    <td class="px-4 py-2 font-bold"><%= staff.name %></td>
                    <td class="px-4 py-2"><%= staff.specialization %></td>
                    <td class="px-4 py-2">
                        <img src="<%= staff.image?.url || '/images/default-avatar.png' %>" 
                             alt="<%= staff.name %>" 
                             class="w-12 h-12 rounded-full object-cover">
                    </td>
                    <td class="px-4 py-2 flex gap-2">
                        <a href="/admin/staff/edit/<%= staff._id %>" class="bg-[#3b82f6] text-white p-2 rounded-full flex items-center justify-center">
                            <i class="fas fa-edit"></i>
                        </a>
                        <button class="bg-[#ef4444] text-white p-2 rounded-full flex items-center justify-center deleteBtn" data-id="<%= staff._id %>">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>

    <!-- Mobile Cards -->
    <div class="md:hidden space-y-4">
        <% staffList.forEach(staff => { %>
        <div class="bg-white p-4 rounded-lg shadow">
            <div class="flex items-center space-x-4">
                <img src="<%= staff.image?.url || '/images/default-avatar.png' %>" 
                     alt="<%= staff.name %>" 
                     class="w-12 h-12 rounded-full object-cover">
                <div class="flex-1">
                    <p class="font-bold text-[#5a4630]"><%= staff.name %></p>
                    <p class="text-[#5a4630]"><%= staff.specialization %></p>
                </div>
            </div>
            <div class="flex space-x-2 mt-3">
                <a href="/admin/staff/edit/<%= staff._id %>" class="bg-[#3b82f6] text-white p-2 rounded-full flex items-center justify-center">
                    <i class="fas fa-edit"></i>
                </a>
                <button class="bg-[#ef4444] text-white p-2 rounded-full flex items-center justify-center deleteBtn" data-id="<%= staff._id %>">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
        <% }) %>
    </div>
</div>

<!-- Delete Modal -->
<div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-11/12 md:w-96 p-6">
        <h3 class="text-lg font-bold mb-4">Confirm Delete</h3>
        <p class="mb-6">Are you sure you want to delete this staff member?</p>
        <div class="flex justify-end space-x-4">
            <button id="cancelDelete" class="px-4 py-2 rounded-lg bg-gray-300">Cancel</button>
            <form id="deleteForm" method="POST">
                <input type="hidden" name="_method" value="DELETE">
                <button type="submit" class="px-4 py-2 rounded-lg bg-red-500 text-white">Delete</button>
            </form>
        </div>
    </div>
</div>

<script>
    const deleteModal = document.getElementById('deleteModal');
    const deleteForm = document.getElementById('deleteForm');
    const cancelDelete = document.getElementById('cancelDelete');

    document.querySelectorAll('.deleteBtn').forEach(btn => {
        btn.addEventListener('click', () => {
            const staffId = btn.getAttribute('data-id');
            deleteForm.setAttribute('action', `/admin/staff/delete/${staffId}`);
            deleteModal.classList.remove('hidden');
            deleteModal.classList.add('flex');
        });
    });

    cancelDelete.addEventListener('click', () => {
        deleteModal.classList.add('hidden');
        deleteModal.classList.remove('flex');
    });
</script>
