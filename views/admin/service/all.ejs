<div class="space-y-6 p-2 md:p-6 rounded-lg">

    <!-- Header with Services + Total + Button -->
    <div class="flex flex-col md:flex-row justify-between items-center bg-[#f8f2eb] p-6 rounded-lg shadow space-y-2 md:space-y-0">
        <h2 class="text-xl md:text-2xl font-bold text-[#c69858]">Services</h2>
        <p class="text-[#5a4630] text-base md:text-lg font-semibold">
            Total Services: <span class="font-bold"><%= services.length %></span>
        </p>
        <a href="/admin/services/add" class="bg-[#bf9456] text-white px-4 py-2 rounded-lg inline-flex items-center mt-2 md:mt-0">
            <i class="fas fa-plus mr-2"></i> Add Service
        </a>
    </div>

    <!-- Services Table -->
    <div class="bg-white p-6 rounded-lg shadow overflow-x-auto">

        <h3 class="text-lg md:text-xl font-bold mb-4 text-[#c69858]">Services List</h3>

        <!-- Desktop Table -->
        <div class="hidden md:block">
            <table class="table-auto w-full min-w-[700px]">
                <thead>
                    <tr class="bg-[#f3e6d6] text-left text-[#5a4630]">
                        <th class="px-4 py-2">Service</th>
                        <th class="px-4 py-2">Duration</th>
                        <th class="px-4 py-2">Price</th>
                        <th class="px-4 py-2">Image</th>
                        <th class="px-4 py-2">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% services.forEach(service => { %>
                    <tr class="border-b last:border-b-0 text-[#5a4630]">
                        <td class="px-4 py-2 font-bold text-[#5a4630]"><%= service.name %></td>

                        <td class="px-4 py-2"><%= service.duration %></td>
                        <td class="px-4 py-2">₹<%= service.price %></td>
                        <td class="px-4 py-2">
                            <div class="w-16 h-16 rounded-full overflow-hidden border-2 border-[#bf9456]">
                                <img src="<%= service.image?.url || '/images/default-service.png' %>" 
                                     alt="<%= service.name %>" 
                                     class="w-full h-full object-cover">
                            </div>
                        </td>
                        <td class="px-4 py-2 flex gap-2">
                            <!-- Edit Icon -->
                            <a href="/admin/services/edit/<%= service._id %>" 
                               class="bg-[#3b82f6] p-2 rounded-full text-white flex items-center justify-center">
                                <i class="fas fa-edit"></i>
                            </a>
                            <!-- Delete Icon -->
                            <button class="bg-[#ef4444] p-2 rounded-full text-white flex items-center justify-center deleteBtn" 
                                    data-id="<%= service._id %>">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>

        <!-- Mobile Card -->
        <div class="md:hidden space-y-4">
            <% services.forEach(service => { %>
            <div class="bg-white p-4 rounded-lg shadow">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 rounded-full overflow-hidden border-2 border-[#bf9456]">
                            <img src="<%= service.image?.url || '/images/default-service.png' %>" 
                                 alt="<%= service.name %>" 
                                 class="w-full h-full object-cover">
                        </div>
                        <div>
                            <p class="font-bold text-[#5a4630]"><%= service.name %></p>
                            <p class="text-[#5a4630]">Duration: <%= service.duration %></p>
                            <p class="text-[#5a4630]">Price: ₹<%= service.price %></p>
                        </div>
                    </div>
                    <div class="flex flex-col gap-2 ml-2">
                        <a href="/admin/services/edit/<%= service._id %>" 
                           class="bg-[#3b82f6] p-2 rounded-full text-white flex items-center justify-center">
                            <i class="fas fa-edit"></i>
                        </a>
                        <button class="bg-[#ef4444] p-2 rounded-full text-white flex items-center justify-center deleteBtn" 
                                data-id="<%= service._id %>">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
            <% }) %>
        </div>

    </div>
</div>

<!-- Delete Modal -->
<div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-11/12 md:w-96 p-6">
        <h3 class="text-lg font-bold mb-4">Confirm Delete</h3>
        <p class="mb-6">Are you sure you want to delete this service?</p>
        <div class="flex justify-end space-x-4">
            <button id="cancelDelete" class="px-4 py-2 rounded-lg bg-gray-300">Cancel</button>
            <form id="deleteForm" method="POST">
                <button type="submit" class="px-4 py-2 rounded-lg bg-red-500 text-white">
                    Delete
                </button>
            </form>
        </div>
    </div>
</div>

<script>
    const deleteModal = document.getElementById('deleteModal');
    const deleteForm = document.getElementById('deleteForm');
    const cancelDelete = document.getElementById('cancelDelete');

    document.querySelectorAll('.deleteBtn').forEach(btn => {
        btn.addEventListener('click', () => {
            const serviceId = btn.getAttribute('data-id');
            deleteForm.setAttribute('action', `/admin/services/delete/${serviceId}`);
            deleteModal.classList.remove('hidden');
            deleteModal.classList.add('flex');
        });
    });

    cancelDelete.addEventListener('click', () => {
        deleteModal.classList.add('hidden');
        deleteModal.classList.remove('flex');
    });
</script>
